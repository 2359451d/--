# Content

* [Content](#content)
* [IOC源码关注点](#ioc源码关注点)
* [容器创建](#容器创建)
* [BeanFactory总结](#beanfactory总结)

# IOC源码关注点

:bulb:关注点

![](/static/2021-07-23-16-22-14.png)

# 容器创建

![](/static/2021-07-23-16-29-08.png)
![](/static/2021-07-23-16-28-57.png)

---

`refresh()`所有单实例bean创建完成
![](/static/2021-07-23-16-31-50.png)
![](/static/2021-07-23-16-35-43.png)
![](/static/2021-07-23-16-35-55.png)

---

`finishBeanFactoryInitialization(beanFactory)`

进入`AbstractApplicationContext`

![](/static/2021-07-23-16-38-49.png)

---

`DefaultListableBeanFactory`创建bean

![](/static/2021-07-23-16-41-15.png)
![](/static/2021-07-23-16-44-23.png)

![](/static/2021-07-23-16-45-08.png)

* 创建bean的细节

---

`getBean(beanName)`创建bean的细节

* 调`doGetBean()`

---

`AbstractBeanFactory doGetBean(name, null,null,false)`

![](/static/2021-07-23-16-56-23.png)
![](/static/2021-07-23-16-59-49.png)

---

![](/static/2021-07-23-19-16-22.png)
![](/static/2021-07-23-19-18-22.png)

# BeanFactory总结

BeanFactory & ApplicationContext的区别

* BeanFactory是**工厂接口**，负责**创建bean实例**
  * Spring最底层接口
* **ApplicationContext是BeanFactory的子接口，容器接口**
  * 更多的负责容器功能的实现
  * 可以基于beanFactory创建好的对象之上完成强大的容器功能
  * 容器可以从map中获取bean，并且aop，di都在applicationContext接口下的类
  * 留给开发使用的ioc容器接口

:bulb: Spring最大的模式 - 工厂模式

* 帮用户创建bean

