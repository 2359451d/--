# os

## OS功能:

:lemon:进程管理

- 控制

- 调度

- 通信

:lemon:内存管理

:lemon:设备管理
- 分配调度
- 设备无关性
- 传输控制
- 设备驱动

:lemon:文件管理
- 文件，目录操作
- 存取权限管理
- 存储空间管理 

---

:blue_heart:**多道批处理系统:** 内存同时存放多道程序，并行，串行【按顺序，一个未结束，另一个不能开始】

- 多道：系统内可同时容纳多个作业。这些作业放在外存中，组成一个后备队列，系统按一定的调度原则每次从后备作业队列中选取一个或多个作业进入内存运行，最后被CPU选择执行=【READY->RUNNIGN】【短期调度】

- NEW进程=刚被创建，OS为它创建了必要的管理信息

- READY：等待被分配CPU【长期调度程序】

- Running：占用CPU【短期调度】

- 中期调度:进程的换入换出

---

## 典型os类型

:lemon:DOS
![](/static/2020-02-16-12-58-15.png)

:lemon:win
![](/static/2020-02-16-12-58-50.png)

:lemon:嵌入os
![](/static/2020-02-16-13-02-30.png)
- 此linux不是典型桌面型linux

:lemon:网络os
![](/static/2020-02-16-13-04-03.png)

---

## CPU

:lemon:CPU作用:**用于计算，对指令(机器码)进行解码&执行，访址内存&缓存**
![](/static/2020-02-16-13-47-51.png)
- 缺页错误时，从辅存中把所需数据装入内存地址

CPU态:
![](/static/2020-02-16-13-31-28.png)

![](/static/2020-02-16-13-34-02.png)

- 很高权限下才能进行以下指令**【核态】**
  - ![](/static/2020-02-16-13-33-11.png)

---

## 存储器

:lemon:**存储器**
![](/static/2020-02-16-13-44-13.png)

- 主存：内存，RAM(快，需要计算将数据装入reg计算完后，再装入主存),ROM

存储器体系分类
![](/static/2020-02-16-13-45-51.png)

- 缓存用于匹配reg和内存速度

---

## 操作系统逻辑结构--中断机制

![](/static/2020-02-16-15-19-26.png)
![](/static/2020-02-16-15-20-09.png)
![](/static/2020-02-16-15-26-55.png)
![](/static/2020-02-16-15-28-36.png)
![](/static/2020-02-16-15-29-50.png)
 - 核态完成

## :bento: 3. 操作系统用户界面
![](/static/2020-02-16-15-32-30.png)

## 3.1 BIOS&主引导系统
![](/static/2020-02-16-15-33-27.png)

### 实模式【BIOS】&保护模式

![](/static/2020-02-16-15-34-25.png)
- 刚启动，加电=实模式
- ![](/static/2020-02-16-15-37-15.png)
  - :lemon:最后分配系统bios【basic i/o system，**称为固件FIRMWARE】**
  - ![](/static/2020-02-16-15-38-29.png)
  - **以硬件形式存在的软件---固件**
  - :blue_heart:**BIOS功能**
    - 系统启动配置【对系统基本参数进行配置...使用xx设备，比如post服务完成后，进行硬盘的加载就是CMOS服务】
      - ![](/static/2020-02-16-15-41-22.png)
    - 基本I/O服务
      - ![](/static/2020-02-16-15-42-28.png)
    - 系统加电自检&启动（自举）
      - ![](/static/2020-02-16-16-44-04.png)
      - ![](/static/2020-02-16-16-45-54.png)
        - 该指令jump到**加电自检功能【POST】**
    - :lemon:**加电自检POST完成之后，进行各设备初始化**
      - ![](/static/2020-02-16-16-48-08.png)
    - :watermelon:自举过程中，**bios会读取特殊扇区中存放的内容，这块内容区域称为MBR(存放OS)**
      - ![](/static/2020-02-16-16-53-40.png)

### :lemon:完整BIOD&MBR启动过程
![](/static/2020-02-16-17-02-32.png)
- 加电后开机键，电脑执行第一条指令FFFF0（**启动POST加电自检服务**）->POST加电自检服务，初始化基本硬件->**CMOS(系统启动配置)服务,加载硬盘**->MBR(硬盘中某块扇区内容,存放了os等信息)->(MBR分区中的)PBR


---

![](/static/2020-02-16-15-35-37.png)
- OS接管计算机后启动保护模式

---

## :bento: 3.2 操作系统(不同OS不同启动过程)的启动过程

指从加电到桌面环境准备好的过程，一共包括3个过程
![](/static/2020-02-16-17-10-31.png)

1. 初始引导
![](/static/2020-02-16-17-24-50.png)
- :heart:OS内核功能:逐步加载OS剩余部分，最后完全接管计算机

2. 核心初始化
![](/static/2020-02-16-17-30-11.png)

3. 系统初始化
![](/static/2020-02-16-17-31-02.png)
- 待命状态：桌面出现，或控制台出现

---

#### 特定OS启动过程

![](/static/2020-02-16-17-33-17.png)

![](/static/2020-02-16-17-36-03.png)

---

## :bento: 3.3 如何生成(自己的)操作系统,二次开发现有开源OS...【参考P11】

---

## :bento: 3.4 操作系统用户界面SHD

![](/static/2020-02-16-18-04-45.png)
- 批处理程序, bat格式，可以自动执行一系列操作【批处理是普通命令的集合，按批处理】
- 普通命令
  - ![](/static/2020-02-16-18-06-03.png)
    - 提供给用户用来控制计算机的形式
- bat批处理程序(由cmd来解释执行)
  - ![](/static/2020-02-16-18-07-32.png)
    - ![](/static/2020-02-16-18-08-23.png)
- Shell【linux提供的操作界面,最常用的是Bash shell】

## :herb: 3.6 系统调用

- 除了操作界面外的用户界面

![](/static/2020-02-17-15-17-58.png)
- 这些服务，函数都在底层实现，操作

![](/static/2020-02-17-15-20-05.png)
- 调用系统调用的过程中会产生中断：**自愿中断(程序员自行安排的)**
  - ![](/static/2020-02-17-15-21-50.png)
    - 框内为标准中断过程
    - 执行完系统调用后，恢复现场，继续执行系统程序指令

:herb:系统调用分类
![](/static/2020-02-17-15-26-15.png)
- 内部会隐世地转换为高级语言，引发INT 80h中断指令