# JDK9 New Features

study note

- [JDK9 New Features](#jdk9-new-features)
  - [æ¨¡å—åŒ–ç³»ç»Ÿ: Jigsaw -> modularity](#æ¨¡å—åŒ–ç³»ç»Ÿ-jigsaw---modularity)
    - [æ¨¡å—åŒ–å®ç°ç›®æ ‡](#æ¨¡å—åŒ–å®ç°ç›®æ ‡)
    - [æ¨¡å—åŒ–ç‰¹æ€§ä½¿ç”¨](#æ¨¡å—åŒ–ç‰¹æ€§ä½¿ç”¨)
  - [REPLå·¥å…·ï¼šJShell](#replå·¥å…·jshell)
  - [å¤šç‰ˆæœ¬å…¼å®¹JARåŒ…](#å¤šç‰ˆæœ¬å…¼å®¹jaråŒ…)
    - [ä½¿ç”¨æ­¥éª¤](#ä½¿ç”¨æ­¥éª¤)
  - [è¯­æ³•æ”¹è¿›ï¼šæ¥å£çš„ç§æœ‰æ–¹æ³•](#è¯­æ³•æ”¹è¿›æ¥å£çš„ç§æœ‰æ–¹æ³•)
    - [ä½¿ç”¨ä¾‹å­](#ä½¿ç”¨ä¾‹å­)
    - [æŠ½è±¡ç±» vs æ¥å£](#æŠ½è±¡ç±»-vs-æ¥å£)
  - [è¯­æ³•æ”¹è¿›ï¼šé’»çŸ³æ“ä½œç¬¦å‡çº§](#è¯­æ³•æ”¹è¿›é’»çŸ³æ“ä½œç¬¦å‡çº§)
  - [è¯­æ³•æ”¹è¿›ï¼štryresourceå‡çº§](#è¯­æ³•æ”¹è¿›tryresourceå‡çº§)
  - [è¯­æ³•æ”¹è¿›ï¼šUnderScoreä¸‹åˆ’çº¿çš„ä½¿ç”¨é™åˆ¶](#è¯­æ³•æ”¹è¿›underscoreä¸‹åˆ’çº¿çš„ä½¿ç”¨é™åˆ¶)
  - [Stringå­˜å‚¨ç»“æ„å˜æ›´](#stringå­˜å‚¨ç»“æ„å˜æ›´)

## æ¨¡å—åŒ–ç³»ç»Ÿ: Jigsaw -> modularity

ğŸŠ jdk9`jigsaw`é¡¹ç›®(åæœŸæ›´åä¸º`Modularity`)**äº§ç”ŸèƒŒæ™¯**

![](/static/2020-09-11-14-04-25.png)
![](/static/2020-09-11-14-05-25.png)
![](/static/2020-09-11-14-07-56.png)

* **javaè¿è¡Œç¯å¢ƒçš„è†¨èƒ€&è‡ƒè‚¿**
  * æ•´ä¸ªjaréƒ½ä¼šè¢«åŠ è½½è‡³å†…å­˜ï¼Œ
  * **æ¨¡å—åŒ–ï¼šå®ç°åˆ’åˆ†ï¼ŒæŒ‰éœ€åŠ è½½**
* **ç±»åº“äº¤å‰ä¾èµ–ï¼Œé˜»ç¢å¼€å‘æ•ˆç‡**
* å…¬å…±ç±»è¢«è¯¯è®¿é—®
* ç±»è·¯å¾„é—®é¢˜ï¼šæ˜¯å¦ä¼šæœ‰é‡å¤é¡¹ï¼Ÿ

ğŸ¬ moduleæœ¬è´¨

* <font color="red">packageå¤–å†åŒ…è£…ä¸€å±‚</font>
  * **ä¸€ä¸ªmoduleå¯ä»¥æœ‰å¤šä¸ªpackage**
* **ç”¨äºç®¡ç†å„ä¸ªpackage**
  * é»˜è®¤ä¸å£°æ˜çš„packageä¸ºéšè—ï¼Œ<font color="blue">å¯ä»¥å£°æ˜æŸä¸ªpackageæš´éœ²ç”¨äºä½¿ç”¨æˆ–ç»™å…¶ä»–moduleä½¿ç”¨</font>

### æ¨¡å—åŒ–å®ç°ç›®æ ‡

![](/static/2020-09-11-14-18-21.png)

* **å‡å°‘å†…å­˜å¼€é”€**
* **åˆ’åˆ†ï¼ŒæŒ‰éœ€ä½¿ç”¨å¿…è¦æ¨¡å—ï¼Œè€Œéå…¨éƒ¨jdkæ¨¡å—**
  * ç®€åŒ–ç±»åº“&åº”ç”¨çš„å¼€å‘
* JAVASE**å¹³å°é€‚åº”æ€§**ï¼Œé€‚åº”ä¸åŒå¤§å°çš„è®¡ç®—è®¾å¤‡
* æ”¹è¿›**å®‰å…¨æ€§&å¯ç»´æŠ¤æ€§**

### æ¨¡å—åŒ–ç‰¹æ€§ä½¿ç”¨

åŒä¸€projectä¸‹ï¼Œä¸¤ä¸ªè‡ªå®šä¹‰moduleçš„ä½¿ç”¨

* ä¸ºä¸¤ä¸ªmoduleåˆ›å»º`module-info.java`æ–‡ä»¶
  * å¸Œæœ›è¢«ä½¿ç”¨æ¨¡å—çš„æ–‡ä»¶ä¸­ï¼Œå†™å…¥`exports <package_name>`![](/static/2020-09-11-14-24-48.png)
  * **å¸Œæœ›å¯¼å…¥æ¨¡å—çš„æ–‡ä»¶ä¸­ï¼Œå†™å…¥**`requires<module_name>`![](/static/2020-09-11-14-26-43.png)
* æœ€åå¸Œæœ›å¯¼æ¨¡å—ä½¿ç”¨çš„`java`æ–‡ä»¶ä¸­ï¼Œå†™å…¥`import`ä¿¡æ¯
  * å¯¼å…¥moduleä¸­åŒ…ä¸‹`class`![](/static/2020-09-11-14-36-59.png)

ğŸŠ ä½¿ç”¨å®šä¹‰å¥½çš„module

![](/static/2020-09-11-14-43-04.png)

## REPLå·¥å…·ï¼šJShell

> `REPL`: read-evaluate-print-loopï¼Œäº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒ

äº§ç”ŸèƒŒæ™¯

![](/static/2020-09-11-14-47-09.png)

**é»˜è®¤å¯¼å…¥çš„åŒ…**

![](/static/2020-09-11-14-51-38.png)

ğŸŠ `tab`å¯è¡¥å…¨

ğŸŠ ä¸€äº›å‘½ä»¤

![](/static/2020-09-11-14-53-27.png)

* `/edit <method_name>`
  * ä¼šå¼¹å‡ºç¼–è¾‘æ¡†ï¼Œä¾›ä¿®æ”¹
  * ![](/static/2020-09-11-14-54-13.png)
* `/edit`
  * å¼¹å‡ºç¼–è¾‘æ¡†ï¼Œä¿®æ”¹å…ˆå‰å®šä¹‰çš„æ‰€æœ‰ä¸œè¥¿![](/static/2020-09-11-14-55-01.png)
* `/open <path>`
  * æ‰“å¼€å¤–éƒ¨javaæ–‡ä»¶
* <font color="red">jshellåå°ä¼šéšè—ç¼–è¯‘æ—¶æœŸå¼‚å¸¸(checked excpetionå—æ£€å¼‚å¸¸)</font>
  * ![](/static/2020-09-11-14-59-51.png)
* `/exit`
  * é€€å‡ºjshell

## å¤šç‰ˆæœ¬å…¼å®¹JARåŒ…

æ”¯æŒæ–°çš„jdkæƒ…å†µä¸‹ï¼Œæ—§ç‰ˆæœ¬APIå¾—åˆ°ä¿æŠ¤

> By this scheme, it is possible for versions of a calss designed for a later java platform release to **override** the version of that **same class** designed for an earlier java platform release.

![](/static/2020-09-11-15-26-37.png)

### ä½¿ç”¨æ­¥éª¤

1. æä¾›å¿…è¦çš„ç±»
   1. æ¨¡æ‹Ÿä¸åŒç‰ˆæœ¬jdkï¼Œä¸åŒç‰ˆæœ¬çš„ç±»
   2. å¸Œæœ›å®ç°ä¸åŒç‰ˆæœ¬jdkä¸‹ï¼Œè¿è¡Œç‰ˆæœ¬ä¸åŒçš„ç›¸åŒç±»
2. ä»£ç æ‰“åŒ…
   1. ![](/static/2020-09-11-16-12-08.png)
   2. `javac -d build --release 8 src/main/java/com/atguigu/*.java `è¿›è¡Œç¼–è¯‘
   3. `javac -d build9 --release 9 src/main/java-9/com/atguigu/*.java`è¿›è¡Œç¼–è¯‘
   4. `jar --create --main-class=Application --file multijar.jar -C build . --release 9 -C build9 .`ç”ŸæˆjaråŒ…
3. æ·»åŠ jarä¸ºlibrary - `Add as library`
   1. ![](/static/2020-09-11-16-17-45.png)
   2. æ­¤æ—¶ï¼Œä¸åŒjdkç¯å¢ƒè¿è¡Œçš„ç›¸åŒç±»ååŠŸèƒ½è¿è¡Œç»“æœä¸åŒ

## è¯­æ³•æ”¹è¿›ï¼šæ¥å£çš„ç§æœ‰æ–¹æ³•

jdk7

* æ”¯æŒå…¨å±€å¸¸é‡`public static final`
* æŠ½è±¡æ–¹æ³•`public abstract`
* ä¿®é¥°ç¬¦ä¸º`public`

jdk8å¢å¼ºæ¥å£

* æ”¯æŒé»˜è®¤&é™æ€æ¥å£æ–¹æ³•
* ä¿®é¥°ç¬¦ä¸º`public`

jdk9ï¼Œæ”¯æŒ`private`æ¥å£

- æ­¤æ—¶æ–¹æ³•**ä¸ä¼šæˆä¸ºå¯¹å¤–æš´éœ²çš„APIçš„ä¸€éƒ¨åˆ†**
  - å¦‚æ’åºæ–¹æ³•ä¸­çš„`swap()`ï¼Œä¸æƒ³å¯¹å¤–æš´éœ²ï¼Œå¯ä»¥è¿›è¡Œå°è£…

### ä½¿ç”¨ä¾‹å­

```java
interface MyInterface{
    void normalInterface();

    private void int(){
        System.out.println("é€šç”¨æ“ä½œ");
    }
}

class Test implements MyInterface{
    @Override
    public void normalInterface(){
        System.out.println("å®ç°æ¥å£çš„æ–¹æ³•");
    }
}

public class MyInterfaceTest{
    public static void main(String[] args){
        Test test = new Test();
        test.normalInterface();
        // test.int(); //æ— æ³•è°ƒç”¨ï¼Œå› ä¸ºä¸ºprivateæ–¹æ³•
    }
}

```

### æŠ½è±¡ç±» vs æ¥å£

ä¸åŒç‰ˆæœ¬jdkè§’åº¦

* å£°æ˜æ–¹å¼
  * `class`å£°æ˜
  * `interface`å£°æ˜
* å†…éƒ¨ç»“æ„
  * æŠ½è±¡ç±»
    * æŠ½è±¡æ–¹æ³•
    * å…·ä½“æ–¹æ³•
    * æ„é€ å‡½æ•°
  * æ¥å£
    * jdk7
      * æŠ½è±¡æ–¹æ³•
      * å…¨å±€å¸¸é‡
    * jdk8
      * æŠ½è±¡æ–¹æ³•
      * å…¨å±€å¸¸é‡
      * é»˜è®¤æ–¹æ³•
      * é™æ€æ–¹æ³•
    * jdk9
      * æŠ½è±¡æ–¹æ³•
      * å…¨å±€å¸¸é‡
      * é»˜è®¤æ–¹æ³•
      * é™æ€æ–¹æ³•
      * ç§æœ‰æ–¹æ³•
* å…±åŒç‚¹
  * éƒ½ä¸èƒ½å®ä¾‹åŒ–
  * ä»¥å¤šæ€æ–¹å¼ä½¿ç”¨
* æŠ½è±¡ç±»ï¼šå•ç»§æ‰¿ï¼Œæ¥å£ï¼šå¤šå®ç°

## è¯­æ³•æ”¹è¿›ï¼šé’»çŸ³æ“ä½œç¬¦å‡çº§

diamond operatorï¼Œjdk8åŠä¹‹å‰**æ— æ³•ä½¿ç”¨äºåŒ¿åç±»**ï¼Œä½¿ç”¨æ„ä¹‰ä¸º**ç±»å‹æ¨æ–­**

![](/static/2020-09-11-16-51-55.png)

* æ­¤ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªç»§æ‰¿äº†`HashSet`çš„åŒ¿å(å­)ç±»å¯¹è±¡

ğŸŠ jdk9ä½¿ç”¨

![](/static/2020-09-11-16-59-07.png)

## è¯­æ³•æ”¹è¿›ï¼štryresourceå‡çº§

jdk8ä¹‹å‰ï¼Œä¹ æƒ¯å®Œæ•´çš„try...catchç»“æ„å…³é—­èµ„æº

![](/static/2020-09-11-17-21-16.png)

jdk8å®ç°tryresourceè¯­æ³•ï¼Œå®ç°èµ„æºçš„è‡ªåŠ¨å…³é—­

![](/static/2020-09-11-19-52-25.png)

- èµ„æºå¿…é¡»åœ¨tryè¡¨è¾¾ä¸­åˆå§‹åŒ–ï¼Œå¦åˆ™æŠ›å—æ§å¼‚å¸¸

ğŸŠ jdk9ï¼Œå¯ä»¥åœ¨tryå­å¥ä¸­ä½¿ç”¨å·²ç»åˆå§‹åŒ–è¿‡çš„èµ„æº

![](/static/2020-09-11-19-54-02.png)

- æ­¤æ—¶èµ„æºä¸º`final`ï¼Œä¸å¯æ›´æ”¹

## è¯­æ³•æ”¹è¿›ï¼šUnderScoreä¸‹åˆ’çº¿çš„ä½¿ç”¨é™åˆ¶

æœ‰å…³æ ‡è¯†ç¬¦

jdk8ä¸­ï¼Œæ ‡è¯†ç¬¦å¯ä»¥ç‹¬ç«‹ç”¨`_`æ¥å‘½å

```java
String _ = "hello";
System.out.println(_);
```

ğŸŠ **jdk9ä¸æ”¯æŒ**ä½¿ç”¨`_`å•ç‹¬å‘½åæ ‡è¯†ç¬¦ï¼Œå¦‚æœä½¿ç”¨ä¼šæŠ¥é”™

## Stringå­˜å‚¨ç»“æ„å˜æ›´

ä¹‹å‰Stringåº•å±‚æ˜¯`char[]`æ•°ç»„å®ç°

* jdk9æ”¹ä¸º`byte[]`æ•°ç»„
* 